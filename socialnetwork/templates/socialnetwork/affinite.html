{% extends 'socialnetwork/baseCo.html' %}

{# Load the tag library #}
{% load bootstrap3 %}
{# Load CSS and JavaScript #}
{% bootstrap_css %}
{# Display django.contrib.messages as Bootstrap alerts #}
{% load bootstrap_ui_tags %}
{% bootstrap_messages %}
{% load staticfiles %}
{% csrf_token %}

{% block content %}
	<div class="container_affinite">
		<div class="row">
			{% for affinite_list in affinite %}
			<!-- carte description de l'affinité simple -->
	    	<div class="col-xs-12 col-sm-6 col-md-4">
	    		<div class="contour_zone">
	                <div class="text-center">
	                    <h1 class="titre_zone20">
	                    	{% if affinite_list.ajouteur.pk == user.pk%}
		                   		{% if affinite_list.ajoute.first_name or affinite_list.ajoute.last_name %}
	                                {% if affinite_list.ajoute.first_name %}
	                                    {{ affinite_list.ajoute.first_name }} 
	                                {% endif %}
	                                {% if affinite_list.ajoute.last_name %}
	                                    {{ affinite_list.ajoute.last_name }} 
	                                {% endif %}
	                            {% else %}
	                                {{affinite_list.ajoute }}
	                            {% endif %}
	                        {% else %}
	                            {% if affinite_list.ajouteur.first_name or affinite_list.ajouteur.last_name %}
	                                {% if affinite_list.ajouteur.first_name %}
	                                    {{ affinite_list.ajouteur.first_name }} 
	                                {% endif %}
	                                {% if affinite_list.ajouteur.last_name %}
	                                    {{ affinite_list.ajouteur.last_name }} 
	                                {% endif %}
	                            {% else %}
	                                {{affinite_list.ajouteur }}
	                            {% endif %}
	                        {% endif %}
	                    </h1>
	                </div>
	                <div class="contenu_zone row">
	                	<div class='col-sm-7'>
	                	{% for picture in userPicture %}
							{% if affinite_list.ajouteur.pk == user.pk and picture.user.pk == affinite_list.ajoute.pk  or affinite_list.ajoute.pk == user.pk and picture.user.pk == affinite_list.ajouteur.pk %}
								<img src="{{ MEDIA_URL }}{{ picture.picture.url }}" class="avatar img-circle img-thumbnail image150" alt="avatar">
							{% else %}
								<img src="/media/upload/profilePictureOriginal.jpg" class="avatar img-circle img-thumbnail image150" alt="avatar">
							{% endif %}
		            	{% endfor %}
		            	</div>

			            <div class="informationBase col-sm-5">
			            	{% for information in userInformation %}
			                	{% if affinite_list.ajouteur.pk == user.pk and information.user.pk == affinite_list.ajoute.pk or affinite_list.ajoute.pk == user.pk and information.user.pk == affinite_list.ajouteur.pk  %}
									<p><span class="glyphicon glyphicon-user {% if information.genre == 'H' %} sexeHomme {% else %} sexeFemme {% endif %}"></span>
										{{information.get_genre_display}}
				                    </p>
				                    <p><span class="glyphicon glyphicon-gift"></span>
										{{information.age}} ans
				                    </p>
				                    <p><span class="glyphicon glyphicon-map-marker"></span>
										{{information.get_localisation_display}}
				                    </p>
		                        {% endif %}
		                    {% endfor %}
			            </div>
		            </div>
		            <a data-toggle="modal" data-target="#profil_complet{{affinite_list.pk}}" class="btn btn_dark col-xs-offset-3 col-xs-6">
	                    <span class="glyphicon glyphicon-resize-full"></span><span> + d'informations </span>
	                </a>
	                <div class="row">
						 <button type="button" class="btn btn_red col-xs-offset-1 col-xs-4">
	                        <span class="glyphicon glyphicon-trash"></span><span class="hidden-xs"> Supprimer </span>
	                    </button>
                        <a href="{% url 'chat' %}" class="btn btn_green col-xs-offset-2 col-xs-4">
                        	<span class="glyphicon glyphicon-comment"></span><span class="hidden-xs"> Discuter </span>
                        </a>
	                </div>
	    		</div>
			</div>


			<!-- Modal pour afficher le profil complet -->
		    <div class="modal fade" id="profil_complet{{affinite_list.pk}}" tabindex="-1" role="dialog" aria-labelledby="profilLabel" aria-hidden="true">
		        <div class="modal-dialog dialog_opacity">
		            <div class="panel panel_header">
		                <div class="panel-heading">
		                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
		                    <h1 class="panel-title"><span class="glyphicon glyphicon-info-sign"></span> Profil complet</h1>
		                </div>
		                <div class="modal_body row">
		                	<div class="col-sm-6 col-xs-5">
			                	{% for picture in userPicture %}
									{% if affinite_list.ajouteur.pk == user.pk and picture.user.pk == affinite_list.ajoute.pk  or affinite_list.ajoute.pk == user.pk and picture.user.pk == affinite_list.ajouteur.pk %}
										<img src="{{ MEDIA_URL }}{{ picture.picture.url }}" class="avatar img-circle img-thumbnail image250Pointeur" alt="avatar" data-toggle="modal" data-target="#modal_image_profil{{affinite_list.pk}}">
									{% else %}
										<img src="/media/upload/profilePictureOriginal.jpg" class="avatar img-circle img-thumbnail image250Pointeur" alt="avatar" data-toggle="modal" data-target="#modal_image_profil{{affinite_list.pk}}">
									{% endif %}
				            	{% endfor %}
			                </div>
			                <div class="col-sm-6 col-xs-7 text-center">
				                <div class="text-center">
				                    <h1 class="titre_zone20">
            	                    	{% if affinite_list.ajouteur.pk == user.pk%}
            		                   		{% if affinite_list.ajoute.first_name or affinite_list.ajoute.last_name %}
            	                                {% if affinite_list.ajoute.first_name %}
            	                                    {{ affinite_list.ajoute.first_name }} 
            	                                {% endif %}
            	                                {% if affinite_list.ajoute.last_name %}
            	                                    {{ affinite_list.ajoute.last_name }} 
            	                                {% endif %}
            	                            {% else %}
            	                                {{affinite_list.ajoute }}
            	                            {% endif %}
            	                        {% else %}
            	                            {% if affinite_list.ajouteur.first_name or affinite_list.ajouteur.last_name %}
            	                                {% if affinite_list.ajouteur.first_name %}
            	                                    {{ affinite_list.ajouteur.first_name }} 
            	                                {% endif %}
            	                                {% if affinite_list.ajouteur.last_name %}
            	                                    {{ affinite_list.ajouteur.last_name }} 
            	                                {% endif %}
            	                            {% else %}
            	                                {{affinite_list.ajouteur }}
            	                            {% endif %}
            	                        {% endif %}
				                    </h1>
				                </div>
				                <div class="informationBase">
				                    {% for information in userInformation %}
					                	{% if affinite_list.ajouteur.pk == user.pk and information.user.pk == affinite_list.ajoute.pk or affinite_list.ajoute.pk == user.pk and information.user.pk == affinite_list.ajouteur.pk  %}
											<p><span class="glyphicon glyphicon-user {% if information.genre == 'H' %} sexeHomme {% else %} sexeFemme {% endif %}"></span>
												{{information.get_genre_display}}
						                    </p>
						                    <p><span class="glyphicon glyphicon-gift"></span>
												{{information.age}} ans
						                    </p>
						                    <p><span class="glyphicon glyphicon-map-marker"></span>
												{{information.get_localisation_display}}
						                    </p>
						                    <p class="description_comment"><span class="glyphicon glyphicon-comment"></span> 
												{{ information.description }}
						                    </p>
				                        {% endif %}
				                    {% endfor %}
				                </div>
		    				</div>
			            </div>
		            </div>
		        </div>
		    </div>

			<!-- Modal pour afficher les photos en grand -->
		    <div class="modal fade" id="modal_image_profil{{affinite_list.pk}}" tabindex="-1" role="dialog" aria-labelledby="modalImage" aria-hidden="true">
		        <div class="modal-dialog dialog_PP">
		        	<div class="panel panel_header">
		                <div class="panel-heading">
		                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
		                    <h1 class="panel-title"><span class="glyphicon glyphicon-info-sign"></span> Photo de profil</h1>
		            	</div>
		            	<div class="modal-content">
		                	{% for picture in userPicture %}
								{% if affinite_list.ajouteur.pk == user.pk and picture.user.pk == affinite_list.ajoute.pk  or affinite_list.ajoute.pk == user.pk and picture.user.pk == affinite_list.ajouteur.pk %}
									<img src="{{ MEDIA_URL }}{{ picture.picture.url }}" class="avatar img-circle img-thumbnail image400" alt="avatar">
								{% else %}
									<img src="/media/upload/profilePictureOriginal.jpg" class="avatar img-circle img-thumbnail image400" alt="avatar">
								{% endif %}
			            	{% endfor %}
		            	</div>
		            </div>
		        </div>
		    </div>
		{% endfor %}
	   	</div>
	</div>

	<script>
	    // Permet de mettre en actif le bouton de la navbar du header
	    $(document).ready(function () {
	      $(".nav li").removeClass("active");
	      $('#page_affinite').addClass('active');
	    });
	</script>
{% endblock content %}
