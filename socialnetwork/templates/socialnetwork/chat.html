{% extends 'socialnetwork/baseCo.html' %}

{# Load the tag library #}
{% load bootstrap3 %}
{# Load CSS and JavaScript #}
{% bootstrap_css %}
{# Display django.contrib.messages as Bootstrap alerts #}
{% load bootstrap_ui_tags %}
{% bootstrap_messages %}
{% load staticfiles %}
{% csrf_token %}

{% block content %}
	<script src="{% static 'js/chat.js' %}"></script>

    <div class="container">
		<div class="row">
			<!-- carte description de l'affinitÃ© simple -->
	    	<div class="col-xs-offset-2 col-xs-8">
	    		<div class="contour_zone">
	                <div class="text-center">
	                    <h1 class="titre_zone20">Conversation avec XXXXXXX</h1>
	                </div>
	                <div id="chat-body" class="panel">
	                    <div id="msg-list-div" class="panel-body">
	                        <ul id="msg-list" class="list-group">
	                            {% for obj in chat %}
	                                {% if obj.user == request.user %}
	                                    <li class="text-right list-group-item titre_zone_chat">{{ obj.message }}</li>
	                                {% else %}
	                                    <li class="text-left list-group-item titre_zone_chat">{{ obj.message }}</li>
	                                {% endif %}
	                            {% empty %}
	                                <li class="text-right list-group-item titre_zone_chat">No messages yet!</li>
	                            {% endfor %}
	                            <script>
	                                var chatlist = document.getElementById('msg-list-div');
	                                chatlist.scrollTop = chatlist.scrollHeight;
	                            </script>
	                        </ul>
	                    </div>
	                </div>
	                <form id="chat-form" method="post" action="chat_post">
	                    <div id="chat-bottom" class="input-group">
	                        <input type="text" id="chat-msg" name="chat-msg" class="form-control"/>
	                        <span class="input-group-btn">
	                            <input class="btn btn_green" id="send" type="submit" value="Envoyer"/>
	                        </span>
	                    </div>
	                </form>
	    		</div>
			</div>
	   	</div>
	</div>
	<script>
	    // Permet de mettre en actif le bouton de la navbar du header
	    $(document).ready(function () {
	      $(".nav li").removeClass("active");
	      $('#page_affinite').addClass('active');
	    });
	</script>
{% endblock content %}
